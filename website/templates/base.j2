<!doctype html>
<html lang="fr" data-bs-theme="dark">

<head>
  {% block head %}
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.min.css"
    integrity="sha256-BicZsQAhkGHIoR//IB2amPN5SrRb3fHB8tFsnqRAwnk=" crossorigin="anonymous">
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&family=Ysabeau:ital,wght@0,1;0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;0,1000;1,1;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900;1,1000&display=swap"
    rel="stylesheet">
  <link rel="shortcut icon" href="/static/img/favicon.ico">
  <link rel="stylesheet" href="/static/css/custom.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://unpkg.com/intro.js/minified/introjs.min.css">
  <title>QuestMaster - {% block title %}Accueil{% endblock %}</title>
  {% endblock %}
</head>

<body>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="moon-stars-fill" viewBox="0 0 16 16">
      <path
        d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z" />
      <path
        d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z" />
    </symbol>
    <symbol id="sun-fill" viewBox="0 0 16 16">
      <path
        d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z" />
    </symbol>
  </svg>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow">
    <div class="container-fluid">
      <a id="brand" class="navbar-brand" href="/">
        <img src="/static/img/logo.png" alt="QuestMaster" height="50">
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Menu">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item dropdown">
            <a id="annoncesMenu" class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
              aria-expanded="false">
              Annonces
            </a>
            <ul id="annoncesDropdown" class="dropdown-menu">
              <li>
                <h6 class="dropdown-header">Pour les Joueur·euses</h6>
              </li>
              <li><a id="openGames" class="dropdown-item" href="/annonces/">Annonces ouvertes</a></li>
              <li><a id="myPlayerGames" class="dropdown-item {% if not payload['username'] %}disabled{% endif %}"
                  href="/mes_parties/">Mes
                  parties</a></li>
              <li>
                <h6 class="dropdown-header">Pour les MJs</h6>
              </li>
              <li><a id="myGmGames"
                  class="dropdown-item {% if not payload[ 'username'] or not payload['is_gm'] %}disabled{% endif %}"
                  href="/mes_annonces/">Mes annonces</a></li>
              <li><a id="postNewGame"
                  class="dropdown-item {% if not payload[ 'username'] or not payload['is_gm'] %}disabled{% endif %}"
                  href="/annonce/">Poster une annonce</a></li>
            </ul>
          </li>
          <li class="nav-item dropdown">
            <a id="infoMenu" class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
              aria-expanded="false">
              Informations
            </a>
            <ul id="informationsDropdown" class="dropdown-menu">
              <a id="trophiesLink" class="dropdown-item" href="/badges/">Badges</a>
              <a id="trophiesLeaderboardLink" class="dropdown-item" href="/badges/classement/">Badges (classement)</a>
              <a id="calendarLink" class="dropdown-item" href="/calendrier/">Calendrier</a>
              <a id="statsLink" class="dropdown-item" href="/stats/">Statistiques</a>
              <a id="systemsLink" class="dropdown-item" href="/systemes/">Systèmes</a>
              <a id="vttsLink" class="dropdown-item" href="/vtts/">VTTs</a>
            </ul>
          </li>
          <li class="nav-item dropdown">
            <a id="demoMenu" class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
              aria-expanded="false">
              Aide
            </a>
            <ul id="demoDropdown" class="dropdown-menu">
              <a id="playerDemo" class="dropdown-item" href="/demo/">Générale</a>
              <a id="playerDemo" class="dropdown-item" href="/demo/inscription/">M'inscrire</a>
              <li>
                <h6 class="dropdown-header">Pour les MJs</h6>
              </li>
              <li><a class="dropdown-item {% if not payload[ 'username'] or not payload['is_gm'] %}disabled{% endif %}"
                  href="/demo/poster/">Poster une annonce</a></li>
              <li><a class="dropdown-item {% if not payload[ 'username'] or not payload['is_gm'] %}disabled{% endif %}"
                  href="/demo/gerer/">Gérer une annonce</a></li>
            </ul>
          </li>
          {% if payload[ 'is_admin'] %}
          <li class="nav-item">
            <a class="nav-link" href="/admin">
              Admin
            </a>
          </li>
          {% endif %}
        </ul>
        <ul class="nav justify-content-end ms-auto">
          <li class="nav-item dropdown">
            <button class="btn btn-link nav-link py-2 px-0 px-lg-2 dropdown-toggle d-flex align-items-center"
              id="bd-theme" type="button" data-bs-toggle="dropdown" data-bs-display="static">
              <svg class="bi my-1 theme-icon-active">
                <use href="#sun-fill"></use>
              </svg>
              <span class="d-lg-none ms-2" id="bd-theme-text"></span>
            </button>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
              <li>
                <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="light">
                  <svg class="bi me-2 opacity-50 theme-icon">
                    <use href="#sun-fill"></use>
                  </svg>
                  Mode clair
                </button>
              </li>
              <li>
                <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark">
                  <svg class="bi me-2 opacity-50 theme-icon">
                    <use href="#moon-stars-fill"></use>
                  </svg>
                  Mode sombre
                </button>
              </li>
            </ul>
          </li>
          <li class="nav-item">
            <ul class="navbar-nav">
              {% if payload['username'] %}
              <li class="nav-item dropdown">
                <div class="d-flex">
                  <button class="nav-link dropdown-toggle btn-danger" data-bs-toggle="dropdown" aria-expanded="false">
                    <img src="{{ payload['avatar'] }}" alt="{{ payload['username'] }}" width="30" height="30"
                      class="rounded-circle">
                    <span class="d-none d-sm-inline mx-1">{{ payload['username'] }}</span>
                  </button>
                  <ul class="dropdown-menu dropdown-menu-end">
                    <li><a class="dropdown-item" href="/logout/">Me déconnecter</a></li>
                  </ul>
                </div>
              </li>
              {% else %}
              <li>
                <a id="loginButton" href="/login/" class="d-flex btn btn-outline-light">Me connecter</a>
              </li>
              {% endif %}
            </ul>
          </li>
        </ul>

      </div>
    </div>
  </nav>
  <main class="container p-4">
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <div class="container mt-3">
      {% for category, message in messages %}
      <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
      {% endfor %}
    </div>
    {% endif %}
    {% endwith %}
    {% block content %}{% endblock %}
  </main>
  {% block scripts %}
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.min.js"
    integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"
    integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/konami@1.6.3/konami.min.js"></script>
  <script src="/static/js/konami.js"></script>
  <script src="/static/js/theme.js"></script>
  <script>
    window.pageContext = {
      path: "{{ request.path }}",
      isAuthenticated: {% if payload.get('username') %}true{% else %} false{% endif %},
    isGM: {% if payload.get('is_gm') %} true{% else %} false{% endif %}
  };
  </script>
  <script src="https://unpkg.com/intro.js/minified/intro.min.js"></script>
  <script src="/static/js/intro-manager.js"></script>
  {% endblock %}
</body>

</html>
