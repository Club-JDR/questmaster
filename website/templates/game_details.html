{% extends 'base.html' %} {% block title %}{{ game.name }}{% endblock %} {% block content %}
<div class="container">
    <div class="row">
        <h1>{{ game.name }}</h1>
    </div>
    <div class="row">
        <div class="col-lg-5 p-3">
            <div class="row">
                <h4><span class="badge text-bg-{% if game.type == 'campaign' %}primary">Campagne{% else %}success">One Shot{% endif %}</span> <span class="badge text-bg-secondary">{{ game.system.name }}</span></h4>
            </div>
            <div class="row">
                <p class="lh-lg">{{ game.description }}</p>
            </div>
        </div>
        <div class="col-lg-4 p-3">
            <div class="row pb-2">
                <div class="col"><strong>Date</strong></div>
                <div class="col text-center"> {{ game.date|format_datetime }}</div>
            </div>
            <div class="row pb-2">
                <div class="col"><strong>Durée</strong></div>
                <div class="col text-center"> {{ game.length }}</div>
            </div>
            <div class="row pb-2">
                <div class="col"><strong>Avertissement</strong></div>
                <div class="col text-center">
                    {% if game.restriction == 'all' %}
                    <span class="badge text-bg-success">Tout public</span> {% elif game.restriction == '16+' %}
                    <span class="badge text-bg-warning">16+</span> {% else %}
                    <span class="badge text-bg-danger">18+</span> {% endif %} {% if game.restriction_tags %} {% set tags = game.restriction_tags.split(',') %} {% endif %} {% for tag in tags %}<span class="badge bg-secondary">{{ tag }}</span> {% endfor
                    %}
                </div>
            </div>
            <div class="row pb-2">
                <div class="col"><strong>Maître·sse du Jeu</strong></div>
                <div class="col">
                    <figure class="figure mx-auto d-block">
                        <div class="text-center">
                            <img src="{{ game.gm.avatar }}" class="figure-img img-fluid rounded-circle" alt="{{ game.gm.name }}" width="30" height="30">
                        </div>
                        <figcaption class="figure-caption text-center">{{ game.gm.name }}</figcaption>
                    </figure>
                </div>
            </div>
            <div class="row pb-2">
                <div class="col"><strong>Joueur·euses</strong></div>
                <div class="col">
                    <div class="row gy-4">
                        {% if game.players|length > 0 %} {% for player in game.players %}
                        <div class="col">
                            <figure class="figure mx-auto d-block position-relative">
                                <div class="text-center"><img src="{{ player.avatar }}" class="figure-img img-fluid rounded-circle" alt="{{ player.name }}" width="30" height="30"></div>
                                <figcaption class="figure-caption text-center">{{ player.name }}</figcaption>
                            </figure>
                        </div>
                        {% endfor %} {% else %}
                        <p class="text-center">Aucun·e joueur·euses pour le moment.</p>
                        {% endif %}
                    </div>

                </div>
            </div>
        </div>
        <div class="col-lg-3 p-3">
            <div class="row">
                <div class="figure">
                    <img src="{{ game.img }}" class="figure-img img-fluid rounded img-preview" alt="{{ game.name }}">
                </div>
            </div>
            {% if payload['user_id'] != game.gm.id %}
            <div class="row">
                <span class="d-inline-block d-grid" tabindex="0" data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-title="{% if payload == {} %}Vous devez vous connecter pour pouvoir vous inscrire.{% endif %}">
                      {% if is_player %}
                      <button type="button" class="btn btn-danger" >
                          Se désinscrire
                      </button>
                      {% else %}
                      <button type="button" class="btn btn-success" {% if (payload == {}) or (payload[ 'user_id'] == game.gm.id) %}disabled{% endif %}>
                          S'inscrire
                      </button>
                      {% endif %}
                  </span>
            </div>
            {% endif %}
        </div>
    </div>
</div>
<div class="row text-center">
    <div class="col align-self-center">
        {% if payload['user_id'] == game.gm.id or payload['is_admin'] %}
        <div class="btn-group" role="group" aria-label="Actions du MJ">
            <a href="/annonces/{{game.id}}/editer" type="button" class="btn btn-primary" data-bs-toggle="tooltip" data-bs-title="Éditer l'annonce."><i class="bi bi-pencil-square"></i> Éditer</a>
            <a href="/annonces/{{game.id}}/editer" type="button" class="btn btn-outline-secondary" data-bs-toggle="tooltip" data-bs-title="Gérer les inscriptions."><i class="bi bi-people"></i> Gérer</a>
            <button type="button" class="btn btn-outline-secondary" data-bs-toggle="tooltip" data-bs-title="Ajouter/supprimer une session."><i class="bi bi-calendar4-week"></i> Planifier</button>
            <button type="button" class="btn btn-danger" data-bs-toggle="tooltip" data-bs-title="Archiver l'annonce une fois la partie finie."><i class="bi bi-archive"></i> Archiver</button>
        </div>
        {% endif %}
    </div>
</div>
</div>
{% endblock %} {% block scripts %} {{ super() }}
<script src="/static/js/tooltips.js"></script>{% endblock %}